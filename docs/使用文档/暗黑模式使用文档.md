# HeartChat 暗黑模式使用文档

## 一、功能概述

HeartChat 小程序支持完整的暗黑模式（Dark Mode）功能，可以根据系统设置自动切换，也可以手动设置。暗黑模式提供了更舒适的夜间使用体验，减轻眼睛疲劳，同时也能节省电量（特别是在 OLED 屏幕上）。

### 1.1 主要特点

- **系统跟随**：默认跟随系统暗黑模式设置自动切换
- **手动切换**：可在个人资料页面手动开启/关闭暗黑模式
- **全局一致**：所有页面和组件都支持暗黑模式，保持视觉一致性
- **本地存储**：暗黑模式设置会保存在本地缓存中，下次启动时自动应用
- **实时切换**：切换暗黑模式时，界面会立即响应变化，无需重启应用

## 二、使用方法

### 2.1 系统跟随模式

默认情况下，HeartChat 会跟随系统的暗黑模式设置：

1. 在手机系统设置中开启暗黑模式，HeartChat 会自动切换到暗黑模式
2. 在手机系统设置中关闭暗黑模式，HeartChat 会自动切换到亮色模式

### 2.2 手动切换模式

如果您希望 HeartChat 的显示模式与系统设置不同，可以手动切换：

1. 进入"个人中心"页面
2. 点击"个人资料"进入个人资料页面
3. 在"设置"卡片中，找到"暗黑模式"选项
4. 点击开关按钮即可切换暗黑模式

手动设置的暗黑模式优先级高于系统设置，一旦手动设置后，将不再跟随系统设置自动切换。

### 2.3 重置为系统跟随模式

如果您希望恢复系统跟随模式：

1. 清除小程序缓存：在微信中长按 HeartChat 小程序图标，选择"设置"，然后点击"清除缓存"
2. 重新打开 HeartChat，此时会恢复为系统跟随模式

## 三、暗黑模式效果

HeartChat 的暗黑模式经过精心设计，在保持功能一致性的同时，提供了更舒适的夜间视觉体验：

### 3.1 颜色变化

- **背景色**：由浅灰色 (#f8f9fa) 变为深色 (#1a1d20)
- **卡片背景**：由白色 (#ffffff) 变为深灰色 (#2d3748)
- **文本颜色**：由深色 (#333333) 变为浅色 (#e2e8f0)
- **边框颜色**：由浅灰色 (#e2e8f0) 变为深灰色 (#4a5568)
- **主题色**：由蓝色 (#5e72e4) 变为浅蓝色 (#9ecaff)

### 3.2 对比度调整

暗黑模式下，所有元素的对比度都经过调整，确保在暗光环境下仍然清晰可辨：

- 文本与背景的对比度符合 WCAG 2.1 AA 级标准
- 图标和按钮的视觉层次更加明确
- 边框和分割线的可见度适当降低，减少视觉干扰

### 3.3 阴影效果

暗黑模式下，阴影效果也进行了相应调整：

- 减少阴影的不透明度，避免在深色背景下过于突兀
- 调整阴影的颜色，使其在深色背景下更加自然
- 保留关键元素的立体感，维持良好的视觉层次

## 四、页面适配情况

HeartChat 的所有页面和组件都已完全适配暗黑模式：

### 4.1 主要页面

- **首页**：包括导航栏、历史对话列表、功能卡片等
- **角色选择页**：包括角色卡片、分类标签、搜索框等
- **聊天页面**：包括聊天气泡、输入框、工具栏等
- **用户中心**：包括个人信息卡、功能列表、数据图表等
- **情绪分析**：包括情绪图表、分析结果、建议卡片等
- **每日报告**：包括情绪总结、关键词云、运势卡片等

### 4.2 组件适配

- **导航栏**：适配深色背景和文字颜色
- **按钮**：根据状态调整背景色和文字颜色
- **输入框**：调整背景色、边框色和文字颜色
- **开关按钮**：保持功能一致性，调整视觉样式
- **图表**：调整坐标轴、标签和图例颜色，保持数据可读性
- **弹出框**：调整背景色、边框和阴影效果

## 五、常见问题

### 5.1 暗黑模式设置不生效

**问题**：手动切换暗黑模式后，部分页面没有正确显示暗黑模式。

**解决方案**：
1. 确保您使用的是最新版本的 HeartChat
2. 尝试退出并重新进入该页面
3. 如果问题仍然存在，可以尝试清除缓存并重新打开小程序

### 5.2 图表在暗黑模式下显示异常

**问题**：某些图表在暗黑模式下颜色显示不正确或对比度不足。

**解决方案**：
1. 在图表页面下拉刷新，重新加载图表数据
2. 如果问题仍然存在，可以尝试切换回亮色模式查看图表

### 5.3 暗黑模式下图片显示过亮

**问题**：某些图片在暗黑模式下显得过于明亮，影响视觉体验。

**解决方案**：
这是由于图片本身没有暗黑模式版本导致的。我们正在逐步优化图片资源，未来版本会解决这个问题。

## 六、未来优化计划

我们将持续优化 HeartChat 的暗黑模式体验：

1. **图片资源优化**：为所有图片提供暗黑模式专用版本
2. **自定义主题**：允许用户自定义暗黑模式的颜色方案
3. **定时切换**：支持根据时间自动切换暗黑/亮色模式
4. **渐变切换**：添加模式切换时的平滑过渡动画
5. **更多对比度选项**：提供高对比度模式，进一步提升可访问性

---

如有任何问题或建议，请通过用户中心的"反馈"功能与我们联系。
