# HeartChat 技术栈说明

## 概述

HeartChat 采用微信小程序原生框架和云开发技术栈，这种组合提供了快速开发、便捷部署和良好用户体验的优势。本文档详细说明项目使用的技术栈及其选择理由。

## 前端技术栈

### 核心框架

- **微信小程序原生框架**
  - 版本：最新稳定版
  - 选择理由：原生框架提供最佳性能和兼容性，无需额外的转换层
  - 应用场景：整个小程序前端开发

### 开发语言

- **JavaScript**
  - 版本：ES6+
  - 选择理由：良好的生态系统，团队熟悉度高，与小程序原生框架完美兼容
  - 应用场景：页面逻辑、组件开发、工具函数

### 样式技术

- **WXSS**
  - 特点：微信小程序的样式语言，类似 CSS 但有特定扩展
  - 选择理由：小程序原生支持，提供 rpx 等响应式单位
  - 应用场景：页面和组件样式

### UI 组件

- **自定义组件**
  - 实现方式：基于小程序自定义组件系统
  - 选择理由：高度定制化，符合产品设计需求
  - 应用场景：聊天气泡、情感卡片、角色选择器等

- **第三方组件库**
  - 名称：WeUI、Vant Weapp（按需使用）
  - 选择理由：成熟稳定，提供常用 UI 组件
  - 应用场景：基础表单元素、加载状态、弹窗等

### 数据可视化

- **ECharts**
  - 版本：最新兼容版
  - 选择理由：功能强大，定制性高，有小程序适配版本
  - 应用场景：情感趋势图表、数据统计展示

## 后端技术栈

### 云开发平台

- **微信云开发**
  - 版本：最新稳定版
  - 选择理由：与小程序无缝集成，降低开发和运维成本
  - 应用场景：整个后端服务架构

### 云函数

- **Node.js**
  - 版本：最新 LTS 版本
  - 选择理由：异步处理能力强，适合 I/O 密集型操作
  - 应用场景：所有云函数实现

- **wx-server-sdk**
  - 版本：最新稳定版
  - 选择理由：微信官方提供的云开发服务端 SDK
  - 应用场景：云函数中操作数据库、存储和调用其他云服务

### 数据库

- **云数据库**
  - 类型：NoSQL（基于 MongoDB）
  - 选择理由：灵活的数据模型，适合快速迭代和非结构化数据
  - 应用场景：存储用户信息、聊天记录、情感分析结果等

### 存储

- **云存储**
  - 特点：提供文件存储服务
  - 选择理由：与云开发平台集成，使用简单
  - 应用场景：存储用户头像、角色图片等媒体文件

## AI 服务集成

### 对话生成

- **外部大语言模型 API**
  - 可选方案：OpenAI API、百度文心 API 等
  - 选择理由：成熟的对话能力，支持角色扮演
  - 应用场景：生成 AI 角色回复

### 情感分析

- **百度 AI 情感分析 API**
  - 功能：文本情感倾向分析
  - 选择理由：中文情感分析效果好，API 稳定
  - 应用场景：分析用户输入的情感倾向

### 关键词提取

- **百度 AI 文本标签 API**
  - 功能：从文本中提取关键词和主题
  - 选择理由：中文处理能力强，结果准确
  - 应用场景：提取用户关注点和兴趣

## 开发工具

### IDE

- **微信开发者工具**
  - 版本：最新稳定版
  - 选择理由：官方提供，集成调试和预览功能
  - 应用场景：日常开发和调试

### 版本控制

- **Git**
  - 工具：GitHub/GitLab
  - 选择理由：分布式版本控制，团队协作必备
  - 应用场景：代码管理和协作

### 代码规范

- **ESLint**
  - 配置：基于 Airbnb JavaScript 风格指南
  - 选择理由：保证代码质量和一致性
  - 应用场景：JavaScript 代码检查

- **Prettier**
  - 配置：团队自定义配置
  - 选择理由：自动格式化代码，减少风格争议
  - 应用场景：代码格式化

## 测试工具

### 单元测试

- **Jest**
  - 版本：最新稳定版
  - 选择理由：功能全面，支持模拟和快照测试
  - 应用场景：工具函数和组件逻辑测试

### 云函数测试

- **云开发云函数测试工具**
  - 特点：支持本地调试和模拟云环境
  - 选择理由：官方提供，与云开发环境一致
  - 应用场景：云函数开发和测试

## 部署与发布

### 开发环境

- **云开发测试环境**
  - 用途：日常开发和测试
  - 特点：独立的云资源，不影响生产环境

### 生产环境

- **云开发生产环境**
  - 用途：正式版本部署
  - 特点：稳定可靠，资源配置更高

### 发布流程

- **小程序审核发布**
  - 工具：微信小程序管理后台
  - 流程：代码上传 → 提交审核 → 发布

## 监控与分析

### 性能监控

- **微信小程序性能监控**
  - 功能：监控启动时间、页面切换时间等性能指标
  - 选择理由：官方提供，数据准确

### 错误监控

- **云开发日志与监控**
  - 功能：记录云函数执行情况和错误
  - 选择理由：与云开发平台集成

### 用户分析

- **微信小程序数据分析**
  - 功能：用户行为分析、转化漏斗等
  - 选择理由：官方提供，与小程序无缝集成

## 技术选型考量

### 为什么选择原生框架而非跨端框架

1. **性能优势**：原生框架直接运行，无额外转换层
2. **完整能力**：可以使用微信小程序的全部特性和 API
3. **更新及时**：随微信版本更新获得新特性
4. **文档完善**：官方文档详尽，社区资源丰富

### 为什么选择云开发而非自建服务器

1. **开发效率**：无需管理服务器，专注业务逻辑
2. **成本优势**：按量计费，初期成本低
3. **扩展能力**：可根据用户量自动扩展
4. **安全性**：微信团队维护，安全性有保障

### 为什么选择 JavaScript 而非 TypeScript

1. **团队熟悉度**：团队成员都熟悉 JavaScript
2. **开发速度**：前期快速迭代，减少类型定义的工作量
3. **学习成本**：新成员加入时学习曲线较低
4. **未来迁移**：保留未来迁移到 TypeScript 的可能性

## 技术栈演进计划

### 短期计划（3-6个月）

- 优化组件库，提高复用性
- 完善云函数错误处理和日志系统
- 增强数据分析能力

### 中期计划（6-12个月）

- 考虑引入 TypeScript 提高代码健壮性
- 增强 AI 服务集成，提供更多智能特性
- 优化数据库结构和查询性能

### 长期计划（1年以上）

- 探索多端支持可能性
- 建立完整的 CI/CD 流程
- 考虑引入更多云原生服务
