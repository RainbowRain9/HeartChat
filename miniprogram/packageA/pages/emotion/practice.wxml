<!--packageA/pages/emotion/practice.wxml-->
<view class="container">
  <!-- 练习列表 -->
  <view class="practice-list">
    <block wx:if="{{practices.length}}">
      <view 
        class="practice-item {{item.completed ? 'completed' : ''}}"
        wx:for="{{practices}}" 
        wx:key="id"
        bindtap="viewPractice"
        data-id="{{item.id}}"
      >
        <view class="item-content">
          <view class="title">{{item.title}}</view>
          <view class="desc">{{item.description}}</view>
          <view class="meta">
            <text class="duration">预计时长: {{item.duration}}分钟</text>
            <text class="difficulty">难度: {{item.difficulty}}</text>
          </view>
        </view>
        <view class="item-status">
          <view class="status-icon {{item.completed ? 'completed' : ''}}">
            <view class="check"></view>
          </view>
        </view>
      </view>
    </block>
    <view class="empty" wx:else>
      <text>暂无练习内容</text>
    </view>
  </view>

  <!-- 练习详情弹窗 -->
  <view class="practice-detail {{showDetail ? 'show' : ''}}" catchtap="closeDetail">
    <view class="detail-content" catchtap="stopPropagation">
      <view class="detail-header">
        <text class="title">{{currentPractice.title}}</text>
        <view class="close" bindtap="closeDetail">×</view>
      </view>
      
      <scroll-view class="detail-body" scroll-y>
        <view class="section">
          <view class="section-title">练习说明</view>
          <text class="section-content">{{currentPractice.description}}</text>
        </view>
        
        <view class="section">
          <view class="section-title">练习步骤</view>
          <view class="steps">
            <view 
              class="step-item"
              wx:for="{{currentPractice.steps}}"
              wx:key="*this"
            >
              <text class="step-num">{{index + 1}}</text>
              <text class="step-text">{{item}}</text>
            </view>
          </view>
        </view>

        <view class="section">
          <view class="section-title">注意事项</view>
          <view class="tips">
            <text 
              class="tip-item"
              wx:for="{{currentPractice.tips}}"
              wx:key="*this"
            >· {{item}}</text>
          </view>
        </view>
      </scroll-view>

      <view class="detail-footer">
        <button 
          class="complete-btn {{currentPractice.completed ? 'disabled' : ''}}"
          bindtap="completePractice"
          disabled="{{currentPractice.completed || loading}}"
          loading="{{loading}}"
        >
          {{currentPractice.completed ? '已完成' : '完成练习'}}
        </button>
      </view>
    </view>
  </view>

  <!-- 加载中 -->
  <view class="loading" wx:if="{{loading}}">
    <view class="loading-dots">
      <view class="dot"></view>
      <view class="dot"></view>
      <view class="dot"></view>
    </view>
  </view>
</view>