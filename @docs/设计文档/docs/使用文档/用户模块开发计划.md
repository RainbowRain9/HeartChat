# HeartChat 用户模块开发计划

## 用户数据库设计

### 1. 用户基础信息表 (user_base)
- _id: 系统自动生成的唯一ID
- user_id: 用户ID (与openid关联)
- openid: 微信OpenID
- username: 用户昵称
- avatar_url: 头像URL
- user_type: 用户类型 (1普通/2企业/3管理员)
- status: 账号状态 (0禁用/1启用)
- created_at: 创建时间
- updated_at: 更新时间

### 2. 用户详细信息表 (user_profile)
- _id: 系统自动生成的唯一ID
- user_id: 用户ID (与user_base关联)
- gender: 性别 (0未知/1男/2女)
- country: 国家
- province: 省份
- city: 城市
- bio: 个人简介
- tags: 用户标签
- created_at: 创建时间
- updated_at: 更新时间

### 3. 用户统计信息表 (user_stats)
- _id: 系统自动生成的唯一ID
- stats_id: 统计ID
- user_id: 用户ID (与user_base关联)
- openid: 微信OpenID
- chat_count: 对话次数
- solved_count: 解决问题数
- rating_avg: 平均评分
- active_days: 活跃天数
- last_active: 最后活跃时间
- emotion_records_count: 情绪记录数
- daily_report_count: 每日报告数
- created_at: 创建时间
- updated_at: 更新时间

### 4. 用户配置表 (user_config)
- _id: 系统自动生成的唯一ID
- user_id: 用户ID (与user_base关联)
- dark_mode: 是否启用暗黑模式
- notification_enabled: 是否启用通知
- language: 语言设置
- created_at: 创建时间
- updated_at: 更新时间

### 5. 用户兴趣表 (user_interests)
- _id: 系统自动生成的唯一ID
- user_id: 用户ID (与user_base关联)
- interests: 兴趣标签数组 (Array<Object{tag: String, score: Number}>)
- aggregated_interest_vector: 用户聚合兴趣向量 (Array<Number>)
- created_at: 创建时间
- updated_at: 更新时间

## 用户页面开发

### 1. 用户主页 (pages/user/user)
- 显示用户基本信息
- 提供功能入口 (角色管理、对话记录、设置等)
- 显示用户统计数据

### 2. 个人资料页 (pages/user/profile/index)
- 显示并允许编辑用户详细信息
- 显示用户性格分析和兴趣标签
- 提供头像上传功能

## 开发步骤

1. 创建用户数据库表结构
2. 开发用户页面 (pages/user/user)
3. 完善个人资料页 (pages/user/profile/index)
4. 测试用户功能

## 完成情况

- [ ] 用户数据库设计
- [ ] 用户主页开发
- [ ] 个人资料页完善
- [ ] 功能测试
