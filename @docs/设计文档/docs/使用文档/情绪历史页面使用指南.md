# 情绪历史页面使用指南

## 1. 功能概述

情绪历史页面是HeartChat小程序中的一个重要功能模块，它提供了对用户情绪数据的全面可视化和分析。通过这个页面，用户可以：

- 查看不同时间范围内的情绪变化趋势
- 了解情绪类型的分布情况
- 监控情绪波动指数及其变化
- 通过日历形式查看每天的主要情绪状态
- 浏览最近的情绪分析记录

该页面采用卡片式设计，符合iOS设计规范，提供了直观、美观的用户界面，同时支持暗黑模式，与系统设置同步。

## 2. 页面入口

情绪历史页面可以通过以下方式进入：

1. 在用户中心页面，点击"情绪历史"卡片
2. 在每日报告页面，点击"查看更多历史"按钮
3. 在情绪分析结果页面，点击"查看历史记录"按钮

## 3. 功能详解

### 3.1 时间范围选择

页面顶部提供了时间范围选择器，用户可以选择查看不同时间范围内的情绪数据：

- **一周**：显示最近7天的情绪数据（默认选项）
- **一个月**：显示最近30天的情绪数据
- **三个月**：显示最近90天的情绪数据
- **半年**：显示最近180天的情绪数据
- **一年**：显示最近365天的情绪数据

选择不同的时间范围后，页面上的所有图表和数据将自动更新，以反映所选时间范围内的情绪状况。

### 3.2 情绪趋势图

情绪趋势图以折线图的形式展示了不同情绪类型随时间的变化趋势。图表中包含三条曲线：

- **积极情绪**（蓝色）：包括喜悦、满足、平静等积极情绪的占比
- **中性情绪**（黄色）：包括平静、专注等中性情绪的占比
- **消极情绪**（红色）：包括焦虑、压力、疲惫等消极情绪的占比

通过这个图表，用户可以直观地看到自己的情绪变化趋势，了解情绪的波动规律。

### 3.3 情绪分布图

情绪分布图以饼图的形式展示了各种具体情绪类型的占比分布。图表中显示了用户在所选时间范围内最常出现的情绪类型，如：

- 疲惫
- 压力
- 担忧
- 焦虑
- 平静
- 满足
- 快乐

通过这个图表，用户可以了解自己最常出现的情绪类型，从而更好地认识自己的情绪模式。

### 3.4 情绪波动指数

情绪波动指数以柱状图的形式展示了用户情绪的波动程度，并提供了与上周的对比。图表下方还有文字说明，解释了：

- 当前的情绪波动指数值
- 波动水平（低/中/高）
- 与上周相比的变化百分比
- 可能的变化原因分析

情绪波动指数是衡量情绪稳定性的重要指标，较低的波动指数表示情绪较为稳定，较高的波动指数则表示情绪波动较大。

### 3.5 情绪日历

情绪日历以日历网格的形式展示了每天的主要情绪状态。日历中的每个日期都有不同的背景颜色，代表当天的主要情绪类型：

- **绿色**：积极情绪（喜悦、满足等）
- **蓝色**：平静情绪
- **黄色**：中性情绪
- **红色**：消极情绪（焦虑、压力等）

点击日历中的某一天，可以跳转到该日期的每日报告页面，查看更详细的情绪分析。

### 3.6 最近情绪记录

页面底部显示了最近的情绪分析记录列表，每条记录包含：

- 情绪类型图标和名称
- 记录时间
- 情绪来源（与哪个AI角色的对话）

点击记录项可以查看该条记录的详细情绪分析结果。如果记录较多，可以点击"加载更多"按钮查看更多历史记录。

## 4. 操作指南

### 4.1 刷新数据

要刷新情绪历史数据，可以下拉页面触发下拉刷新功能。刷新完成后，页面将显示最新的情绪数据。

### 4.2 查看不同时间范围

1. 在页面顶部的时间范围选择器中，滑动或点击选择所需的时间范围
2. 页面将自动加载并显示所选时间范围内的情绪数据

### 4.3 查看详细情绪记录

1. 在最近情绪记录列表中，点击任意记录项
2. 系统将跳转到情绪分析详情页面，显示该条记录的详细分析结果

### 4.4 查看特定日期的情绪报告

1. 在情绪日历中，点击任意日期
2. 系统将跳转到该日期的每日报告页面，显示当天的情绪总结和分析

## 5. 暗黑模式支持

情绪历史页面完全支持暗黑模式，会根据系统设置自动切换明亮/暗黑主题。在暗黑模式下：

- 页面背景变为深色
- 卡片背景变为深灰色
- 文字颜色变为浅色
- 图表颜色保持一致，但对比度会自动调整以适应暗黑背景

## 6. 常见问题

### 6.1 为什么我看不到任何情绪数据？

如果页面显示"暂无情绪历史数据"，可能是因为：

- 您还没有进行过任何对话，或对话中没有触发情绪分析
- 您选择的时间范围内没有情绪数据
- 数据加载失败

建议：尝试与AI角色多进行一些对话，系统会自动分析您的情绪并记录下来。

### 6.2 情绪波动指数是如何计算的？

情绪波动指数是基于多个因素综合计算的，包括：

- 情绪强度的标准差
- 情绪类型的变化频率
- 时间加权的情绪变化
- 情绪极性的转换次数

指数范围为0-100，数值越高表示情绪波动越大。

### 6.3 如何导出我的情绪历史数据？

目前版本暂不支持导出情绪历史数据的功能，我们计划在未来版本中添加此功能。

## 7. 隐私说明

您的情绪历史数据仅存储在您的账号下，不会与其他用户共享。我们重视用户隐私，所有数据分析都在安全的环境中进行。

---

如有任何问题或建议，请通过用户中心的"反馈"功能与我们联系。
