# 预设角色功能使用指南

## 一、功能概述

预设角色功能允许系统提供一组精心设计的角色，供所有用户使用。这些角色具有丰富的背景故事、性格特点和专业领域，能够满足用户在不同场景下的对话需求，无需用户自己创建角色即可开始对话。

### 主要特点

1. **系统预设**：由系统提供的高质量角色，所有用户均可使用
2. **分类明确**：角色按照不同类型分类，如情感支持、心理咨询、生活伙伴、职场导师等
3. **专业设计**：每个角色都有精心设计的提示词，确保对话质量
4. **统一管理**：系统角色由管理员统一管理，确保内容安全和质量

## 二、使用方法

### 1. 访问角色选择页面

在小程序中，点击底部导航栏的"对话"选项，或从主页点击"开始对话"按钮，进入角色选择页面。

### 2. 浏览预设角色

在角色选择页面中，您可以看到以下几个部分：

- **推荐角色**：系统根据您的使用习惯推荐的角色（最多显示2个）
- **系统角色**：所有系统预设的角色
- **我的角色**：您自己创建的角色

### 3. 筛选角色

您可以通过以下方式筛选角色：

- **分类筛选**：点击顶部的分类标签（全部、情感支持、心理咨询等）
- **搜索筛选**：在搜索框中输入关键词，可以搜索角色名称、描述、关系类型等

### 4. 选择角色

点击任意角色卡片即可选择该角色。选中的角色卡片会显示蓝色边框。

### 5. 查看角色详情

长按任意角色卡片，可以查看角色的详细信息，包括：

- 角色名称和头像
- 角色分类和关系类型
- 角色描述和背景故事
- 性格特点和说话风格
- 使用次数统计

### 6. 开始对话

选择角色后，点击底部的"开始对话"按钮，即可进入聊天界面，开始与所选角色对话。

## 三、系统角色与自定义角色的区别

### 系统角色

- 由系统提供，所有用户均可使用
- 不可编辑或删除
- 在角色详情页面会显示"系统预设角色"标签
- 经过专业设计，提供高质量的对话体验

### 自定义角色

- 由用户自己创建
- 可以编辑和删除
- 仅创建者可见和使用
- 可以根据个人需求自定义各种属性

## 四、预设角色列表

目前系统提供了以下几类预设角色：

### 情感支持类

- **情感顾问**：擅长处理恋爱、友情和家庭关系中的问题
- **倾听者**：善于倾听和理解，提供情感支持和陪伴

### 心理咨询类

- **心理咨询师**：专注于情绪管理和压力缓解
- **正念教练**：帮助用户保持专注和平静，减轻焦虑

### 生活伙伴类

- **学习伙伴**：擅长学习规划和知识分享
- **生活助手**：提供日常生活建议和解决方案

### 职场导师类

- **职场导师**：帮助职业规划和职场技能提升
- **创业顾问**：提供创业建议和商业洞察

## 五、常见问题

### Q1: 我可以修改系统预设角色吗？

A: 不可以。系统预设角色由管理员统一管理，以确保所有用户获得一致的高质量体验。但您可以创建自己的角色，并根据需要自定义各种属性。

### Q2: 系统预设角色会定期更新吗？

A: 是的。我们会定期更新系统预设角色，添加新角色或优化现有角色，以提供更好的用户体验。

### Q3: 我可以基于系统预设角色创建自己的角色吗？

A: 可以。您可以参考系统预设角色的设计，创建自己的角色。在角色创建页面，您可以自定义角色的各种属性，包括名称、头像、描述、背景故事、性格特点等。

### Q4: 系统预设角色的使用是否有限制？

A: 系统预设角色的使用没有特殊限制，所有用户均可使用。但请注意，所有对话内容都应遵守平台规范和相关法律法规。

## 六、技术实现说明

### 数据结构

系统预设角色在数据库中的标识：

```javascript
{
  _id: "角色ID",
  name: "角色名称",
  avatar: "头像URL",
  description: "角色描述",
  category: "分类",
  // ... 其他角色属性
  creator: "system", // 关键字段，标识为系统角色
  isSystem: true,    // 可选字段，标识为系统角色
  isRecommended: true/false, // 是否为推荐角色
  // ... 其他系统字段
}
```

### 查询方式

在角色选择页面，系统会同时查询系统角色和用户自己的角色：

```javascript
// 云函数查询条件
{
  $or: [
    { creator: 'system' }, // 系统角色
    { creator: userId }    // 用户自己的角色
  ]
}
```

### 前端展示

前端会将角色分为三类展示：

1. 推荐角色：`systemRoles.filter(role => role.isRecommended).slice(0, 2)`
2. 系统角色：`roles.filter(role => role.creator === 'system' || role.isSystem)`
3. 用户角色：`roles.filter(role => role.creator !== 'system' && !role.isSystem)`

## 七、更新日志

### 2025-04-22 更新

- 新增预设角色功能，提供多种类型的系统预设角色
- 优化角色选择页面，分别显示系统角色和用户角色
- 修复角色选择页面的显示问题，兼容不同的数据结构
- 增强角色详情弹窗，添加系统预设角色标签
- 更新相关文档，添加预设角色功能使用指南
