# HeartChat 项目待办事项 (v2 - 集成智谱 AI)

## 最近修复的Bug

- [x] **修复“显示最近对话会出现别人的角色”问题**:
    - [x] 优化查询条件，确保只获取当前用户的聊天记录
    - [x] 添加批量获取角色信息的逻辑，确保显示正确的角色名称和头像
    - [x] 统一角色信息字段，使用`role_id`、`role_name`和`role_avatar`作为标准字段
    - [x] 将角色ID和聊天ID存入全局变量，确保聊天页面可以获取到正确的角色ID

## 阶段一：基础框架与核心登录 (优先级: 高)

- [x] **项目初始化与环境配置**:
    - [x] 搭建项目基础结构，配置云开发环境 (记录环境 ID)
    - [x] 初始化 Git 仓库，配置 `.gitignore` (包含安全配置文件)
    - [x] 配置 `project.config.json` (appid, 云开发环境等)
    - [x] 初始化 `app.js` (引入云开发初始化)
- [x] **全局配置 (`app.json`)**:
    - [x] 配置 `pages` (welcome, home 等)
    - [x] 配置 `window` (导航栏样式等)
    - [x] 配置 `tabBar` (原生或准备自定义组件)
    - [x] 配置 `subpackages` (分包结构)
    - [x] 修改 `tabBar` 配置，将心情树洞tab页改为role-select页面
- [x] **欢迎/登录页面 (`pages/welcome/`)**:
    - [x] 实现 UI (Logo, 标语, 登录按钮)
    - [x] 实现登录逻辑 (检查登录态, `wx.getUserProfile`, `wx.login`, 调用 `login` 云函数)
    - [x] 处理授权失败情况
    - [x] 保存登录态和用户信息 (openid, userInfo)
    - [x] 页面跳转逻辑
    - [x] 优化登录流程，直接调用云函数进行登录
- [x] **登录云函数 (`cloudfunctions/login/`)**:
    - [x] 实现 `code2Session` 获取 openid
    - [x] 实现读写 `users` 数据库 (查询/创建/更新用户信息)
    - [x] 返回 openid 及用户信息给前端
- [x] **数据库 (`users` 集合)**:
    - [x] 创建 `users` 集合
    - [x] 定义字段 (openid, nickname, avatar_url, gender, create_time, last_login_time, status)
    - [x] 配置数据库权限
- [x] **主页 (`pages/home/`)**:
    - [x] 实现基础 UI (用户信息区, 功能入口)
    - [x] 获取并显示用户登录信息
    - [x] 实现功能入口跳转逻辑
    - [x] 修改历史对话跳转逻辑，正确跳转到聊天页面
    - [x] 使用switchTab方法跳转到角色选择tab页面，替代原来的navigateTo
- [x] **工具函数 (`utils/`)**:
    - [x] 封装 `utils/auth.js` (登录检查, 信息存取)
    - [x] 封装 `utils/api.js` (基础云函数调用)
    - [x] (可选) 封装 `utils/storage.js` (本地存储)

## 阶段二：角色选择与 AI 对话基础 (优先级: 高)

- [x] **数据库 (`roles` 集合)**:
    - [x] 创建 `roles` 集合
    - [x] 定义字段 (name, avatar, description, tags, **prompt**)
    - [x] **预置系统角色数据 (含精心设计的 Prompt)**
    - [x] 添加系统角色标识字段 (creator="system", isSystem=true)
    - [x] 配置数据库权限
- [x] **角色管理云函数**:
    - [x] 实现获取角色列表接口 (含 Prompt)
    - [x] 实现获取角色详情接口
    - [x] 实现创建角色接口
    - [x] 实现更新角色接口
    - [x] 实现删除角色接口
    - [x] 实现角色使用统计接口
    - [x] 实现角色消息统计接口
    - [x] 实现初始化角色数据接口
    - [x] 优化角色查询逻辑，支持系统角色和用户角色的区分
- [x] **角色选择页面 (`pages/role-select/`)**:
    - [x] 实现 UI (角色列表展示)
    - [x] 实现逻辑 (调用 `roles` 云函数获取列表, 处理选择跳转)
    - [x] 添加测试数据作为备用
    - [x] 修复滚动逻辑问题，解决了出现两个滚动条的问题
    - [x] 修复角色分类显示问题，现在可以在过滤后的分类 tab 下正确显示角色
    - [x] 修复全部角色显示问题，现在可以在全部角色下显示所有角色
    - [x] 修复长按角色后的操作功能，包括查看详情、编辑角色和删除角色
    - [x] 使用自定义导航栏，与微信胶囊按钮齐平
    - [x] 修复返回按钮不生效的问题
    - [x] 修复角色显示不全的问题，兼容不同的数据结构
    - [x] 优化分类过滤逻辑，增强对不同分类名称的兼容性
    - [x] 扩展搜索功能，增加对关系类型的搜索支持
    - [x] 将推荐角色数量从4个减少到2个，使界面更加简洁
    - [x] 实现系统角色和用户角色的区分显示
    - [x] 优化角色详情弹窗，添加系统预设角色标签
    - [x] 优化角色卡片弹窗中的按钮样式，统一编辑、删除和开始对话按钮的外观
    - [x] 修复情感倾向文本被截断的问题，确保短文本在同一行显示
    - [x] 修改返回按钮的功能，现在返回到首页而不是上一页
    - [x] 修复创建新角色和编辑角色按钮的跳转路径
    - [x] 修改开始对话按钮的跳转路径，正确指向分包中的聊天页面
    - [x] 实现角色数据的本地缓存功能，减少重复加载
    - [x] 将角色选择页面作为tab页，替换原心情树洞tab页
    - [x] 移除返回按钮，优化为tab页面的导航栏样式
    - [x] 修复编辑角色按钮的跳转问题，确保编辑后正确返回到角色选择页面
- [x] **角色卡片组件 (`components/role-card/`)**:
    - [x] 实现 UI 和 Props 定义
    - [x] 触发点击事件传递角色 ID
- [x] **数据库 (`chats`, `messages` 集合)**:
    - [x] 创建 `chats` 集合 (会话元数据)
    - [x] 创建 `messages` 集合 (消息详情)
    - [x] 定义字段
    - [x] 配置数据库权限
- [x] **聊天页面 (`packageChat/pages/chat/`)**:
    - [x] 实现 UI (角色信息, 消息滚动区, 输入区)
    - [x] 实现逻辑:
        - [x] 加载角色信息
        - [x] 加载历史消息 (调用 `chat` 云函数, **实现分页**)
        - [x] 监听输入组件发送事件
        - [x] 发送消息 (调用 `chat` 云函数)
        - [x] 处理 AI 回复并展示
        - [x] 实现新消息滚动到底部
        - [x] 实现消息下方自动显示情绪分析标签
        - [x] 实现聊天记录本地缓存
        - [x] 实现下拉刷新获取最新消息
        - [x] 实现上拉加载更多历史消息
        - [x] 实现智能欢迎语系统，根据角色关系类型生成个性化欢迎语
        - [x] 实现智能判断是否有历史聊天记录，有则加载历史记录，无则显示欢迎语
    - [x] 修复布局问题:
        - [x] 修复头部超出限制的问题
        - [x] 添加安全区域适配
        - [x] 优化底部输入框样式
        - [x] 修复最后一条消息被输入框遮挡的问题
- [x] **聊天气泡组件 (`components/chat-bubble/`)**:
    - [x] 实现 UI (区分用户/AI) 和 Props 定义
    - [x] 优化气泡样式，增加圆角和阴影
    - [x] 添加情绪标签显示功能
    - [x] 优化情绪标签样式，实现居中显示
- [x] **聊天输入组件 (`components/chat-input/`)**:
    - [x] 实现 UI (输入框, 发送按钮) 和事件触发
- [x] **聊天云函数 (`cloudfunctions/chat/`)**:
    - [x] **API Key 安全配置 (环境变量或安全配置)**
    - [x] 实现接收用户消息接口
    - [x] 实现加载角色 Prompt 逻辑
    - [x] 实现加载对话历史逻辑 (限制长度)
    - [x] **实现调用智谱 AI API (GLM-4-Flash) 逻辑**
    - [x] 实现保存用户消息和 AI 回复到 `messages` 集合
    - [x] 实现创建/更新 `chats` 集合记录
    - [x] 实现获取历史消息接口 (支持分页)
    - [x] 实现检查聊天存在接口 (检查是否有历史聊天记录)
    - [x] 添加基础错误处理和日志

## 阶段三：情绪感知与基础分析 (优先级: 中)

- [x] **数据库 (`emotion_records` 集合)**:
    - [x] 创建 `emotion_records` 集合
    - [x] 定义字段 (user_id, message_id, chat_id, emotion_type, timestamp)
    - [x] 配置数据库权限
- [x] **分析云函数 (`cloudfunctions/analysis/`)**:
    - [x] 实现情感分析功能 (调用智谱AI GLM-4-Flash API)
    - [x] 实现关键词提取功能 (调用智谱AI GLM-4-Flash API)
    - [x] 实现词向量获取功能 (调用智谱AI Embedding-3 API)
    - [x] 实现关键词聚类功能
    - [x] 实现用户兴趣分析功能
    - [x] 实现关键词分类功能 (调用智谱AI GLM-4-Flash API)
    - [x] 修复 categories 字段为空的问题，确保分类统计数据正确更新
    - [x] 修复数据类型不一致问题，统一使用数组格式存储分类数据
    - [x] 修复参数传递不完整问题，确保前端正确传递分类统计数据
    - [x] 添加时间戳字段，便于追踪分类的时间变化
    - [x] 实现关键词情感关联功能
- [x] **情绪分析组件 (`components/emotion-analysis/`)**:
    - [x] 实现基础 UI (展示分析结果)
    - [x] 实现关键词展示功能
    - [x] 实现情绪图表展示
    - [x] 修复没有次要情绪时的显示问题
    - [x] 修复情绪图标显示问题
    - [x] 实现消息下方自动显示情绪标签
    - [x] 优化情绪标签样式，实现居中显示
- [x] **关键词服务 (`services/keywordService.js`)**:
    - [x] 实现关键词提取功能
    - [x] 实现关键词聚类功能
    - [x] 实现用户兴趣分析功能
    - [x] 实现关键词分类功能
    - [x] 实现关键词情感关联功能
- [x] **关键词测试页面 (`pages/keywordTest/`)**:
    - [x] 实现基础 UI (输入框、按钮、关键词展示)
    - [x] 实现关键词提取功能
- [x] **兴趣标签云组件 (`components/interest-tag-cloud/`)**:
    - [x] 实现基础 UI (标签云展示)
    - [x] 实现自动加载用户兴趣数据
    - [x] 实现标签点击交互
    - [x] 实现标签颜色和字体大小自定义
    - [x] 实现分类信息显示
- [x] **关键词情感统计组件 (`components/keyword-emotion-stats/`)**:
    - [x] 实现基础 UI (正面、负面、中性关键词展示)
    - [x] 实现自动加载关键词情感统计数据
    - [x] 实现关键词点击交互
    - [x] 实现按情感分类展示
    - [x] 实现排序功能

## 阶段四：情绪历史与报告 (优先级: 中)

- [x] **情绪历史页面 (`packageEmotion/pages/emotion-history/`)**:
    - [x] 实现 UI (日期筛选器, 图表区, 列表区)
    - [x] 实现逻辑 (调用云函数获取历史记录, 数据传递给图表和列表)
    - [x] 实现时间范围选择功能 (一周、一个月、三个月、半年、一年)
    - [x] 实现情绪趋势图表展示
    - [x] 实现情绪分布图表展示
    - [x] 实现情绪波动指数展示
    - [x] 实现基于真实情绪记录的情绪波动指数计算
    - [x] 实现波动级别划分和颜色标记
    - [x] 实现波动原因分析
    - [x] 实现情绪日历功能
    - [x] 实现最近情绪记录列表
    - [x] 支持暗黑模式
    - [x] 优化数据获取，从数据库获取真实数据，不再使用模拟数据
    - [x] 实现数据本地缓存机制，提高页面加载速度
    - [x] 在情绪记录中显示对应的角色名称
    - [x] 实现点击情绪记录跳转到对应角色聊天页面的功能
- [x] **每日报告页面 (`packageEmotion/pages/daily-report/`)**:
    - [x] 实现 UI (总结文本, 分布图, 关键词区)
    - [x] 实现逻辑 (调用云函数获取报告数据并展示)
- [x] **情绪图表组件 (`components/ec-canvas/`) - 完善**:
    - [x] 集成图表库 (ECharts for WeChat)
    - [x] 实现绘制情绪趋势线图
    - [x] 实现绘制情绪分布饼图/柱状图
    - [x] 解决 ECharts 组件编译错误（创建缺失的 echarts.wxss 和 wx-echarts.js 文件）
    - [x] 修复图表随页面滚动而移动位置的问题
- [x] **分析云函数 (`cloudfunctions/analysis/`)**:
    - [x] 实现获取情绪历史接口 (按用户、时间范围查询 `emotion_records`)
    - [x] 实现关键词提取功能 (调用智谱AI GLM-4-Flash API)
    - [x] 实现生成每日报告接口:
        - [x] 查询并聚合当日情绪记录
        - [x] **调用 GLM-4-Flash 进行总结、生成建议**
- [x] **定时触发器 (`cloudfunctions/generateDailyReports/`)**:
    - [x] 实现定时生成每日报告功能
    - [x] 配置每日凌晨2点自动触发

## 阶段五：兴趣分析与用户画像 (后台，优先级: 中)

- [ ] **数据库 (`user_interest_vectors` 集合) - 新增**:
    - [ ] 创建 `user_interest_vectors` 集合
    - [ ] 定义字段 (user_id, timestamp, vector, source_*)
    - [ ] 配置数据库权限
- [x] **兴趣分析云函数 (`cloudfunctions/analysis/`)**:
    - [x] 实现接收用户对话文本接口
    - [x] **实现调用智谱 AI Embedding-3 API 生成向量**
    - [x] 实现关键词聚类功能
    - [x] 实现用户兴趣分析功能
- [x] **智谱AI用户画像功能**:
    - [x] 使用智谱AI分析用户对话内容，提取用户的兴趣、偏好、沟通风格和情感模式
    - [x] 生成更准确、更个性化的用户画像
    - [x] 提供更自然、更友好的个性总结描述
    - [x] 实现智能降级机制，当AI分析失败时自动回退到基于规则的分析方法
- [x] **用户画像与聊天系统集成**:
    - [x] 在聊天页面中获取用户画像数据
    - [x] 将用户画像信息添加到角色系统提示中
    - [x] 使用包含用户画像的系统提示生成更个性化的AI回复
    - [x] 优化云函数，支持自定义系统提示词
- [ ] **后台分析任务 (定时触发器或独立脚本)**:
    - [ ] 实现定时聚合用户兴趣数据
    - [ ] 实现用户画像向量聚合
    - [ ] 实现将分析结果 (聚类、标签、画像向量) 更新回 `users` 集合
- [ ] **数据库 (`users` 集合) - 扩展**:
    - [ ] 添加 `aggregated_interest_vector` 和 `interest_tags` 字段

## 阶段六：用户中心与设置 (优先级: 低)

- [x] **数据库 (`user_stats` 集合)**:
    - [x] 创建/设计 `user_stats` 集合或在 `users` 中添加统计字段
    - [ ] 实现统计数据更新逻辑 (原子操作或定时任务)
- [x] **个人资料页面**:
    - [x] 实现 UI (展示基础信息、统计数据、**初步兴趣标签**)
    - [x] 实现逻辑 (调用 `user` 云函数获取数据)
    - [x] 实现编辑昵称/头像功能
    - [x] 实现性格分析和兴趣标签展示
    - [x] 实现深色模式支持
    - [x] 使用 Material Design 3 设计规范重构页面
    - [x] 实现下拉刷新情绪概览和个性分析数据功能
    - [x] 使用情绪历史页面的一周内情绪分布数据
    - [x] 优化个性分析数据处理，正确处理智谱AI返回的用户画像数据
- [ ] **设置页面 (`packageUser/pages/settings/`)**:
    - [ ] 实现 UI (通知、隐私等设置项)
    - [ ] 实现逻辑 (调用 `user` 云函数保存设置)
- [x] **用户管理云函数 (`cloudfunctions/user/`)**:
    - [x] 实现获取用户信息/统计/画像接口
    - [x] 实现更新用户信息/设置接口
- [ ] **用户头像组件 (`components/user-avatar/`) - 完善**:
    - [ ] 支持不同尺寸，处理加载失败

## 阶段七：测试、优化与发布 (贯穿始终，发布前集中处理)

- [ ] **AI 相关测试**:
    - [ ] 测试不同 Prompt 下 AI 的回复质量和角色扮演一致性
    - [ ] 测试情绪分析准确率
    - [ ] 测试 Embedding 生成和兴趣分析效果
    - [ ] 测试 API 调用失败和异常处理
    - [x] 测试 ECharts 组件在各页面的正常工作
    - [x] 测试情绪分析界面在不同情绪数据下的显示效果
    - [x] 测试角色选择页面的滚动、分类和操作功能
    - [x] 测试图片服务在各种情况下的工作状态
    - [x] 测试角色创建页面的导航栏和提示词预览功能
- [ ] **功能测试**: 端到端测试所有核心流程
- [ ] **UI/UX 测试**: 真机测试，不同设备兼容性，交互流畅度
- [ ] **性能优化**:
    - [ ] 优化 AI API 调用耗时（前端 Loading, 后端超时设置, Stream 模式）
    - [ ] 优化数据库查询 (索引)
    - [ ] 优化 Embedding 分析等后台任务效率
    - [x] 实现聊天记录本地缓存，减少网络请求，提高加载速度
- [ ] **安全加固**: 确认 API Key 安全，数据库权限设置合理
- [ ] **代码规范与清理**: ESLint 检查，删除无用代码
- [x] **代码修复**:
    - [x] 修复角色选择页面的滚动、分类和操作功能问题
    - [x] 修复图片服务中的 `getApp()` 调用问题
    - [x] 优化角色创建页面的提示词预览样式
    - [x] 使角色创建页面和角色选择页面的导航栏与微信胶囊按钮齐平
    - [x] 重构用户资料页面，采用 Material Design 3 设计规范
    - [x] 修复角色选择页面角色显示不全和分类显示异常的问题
    - [x] 优化聊天气泡样式，增强用户体验
    - [x] 实现消息下方自动显示情绪标签
    - [x] 修复最后一条消息被输入框遮挡的问题
    - [x] 修复角色编辑页面的跳转逻辑，使用 wx.switchTab 方法跳转回角色选择页面
    - [x] 优化角色编辑页面的保存后跳转逻辑，实现保存成功后自动跳转回角色选择页面
    - [x] 优化角色编辑页面的提示词模板显示，增加文本区域高度并添加自动增长功能
    - [x] 新增提示词专业编辑器页面，提供更好的编辑体验
    - [x] 在角色编辑页面添加“高级编辑”按钮，跳转到提示词编辑器
    - [x] 将角色编辑页面的提示词模板改为卡片形式，点击可跳转到提示词编辑页面
    - [x] 缩短角色编辑页面中“说话风格”和“生活经历”文本区域的高度
    - [x] 修复提示词编辑页面中角色名称显示为URL编码的问题
    - [x] 修复提示词编辑页面保存提示词时出现“没有权限更新此角色”的问题
    - [x] 修复角色编辑页面提示词卡片下方显示"undefined..."的问题
    - [x] 彻底修复角色编辑页面提示词卡片显示undefined问题
    - [x] 优化角色编辑页面中“上一步”和“下一步”按钮的位置
    - [x] 扩大角色编辑页面生活经历文本区域的大小
    - [x] 为角色选择页面添加暗夜模式支持
    - [x] 实现聊天消息分段输出功能
    - [x] 优化提示词生成和分段输出功能
    - [x] 进一步优化对话简洁度，更接近真实手机聊天风格
    - [x] 优化聊天时间戳显示，在同一时间范围内的连续对话只显示一个时间戳
    - [x] 修复历史对话中角色最后回复的消息丢失问题
    - [x] 修复第一个时间戳没有正常显示的问题
    - [x] 优化分段消息逻辑，修复列表和编号内容的处理问题
    - [x] 优化系统提示词，避免使用Markdown语法
    - [x] 修复云函数语法错误，确保云函数可以正常执行
    - [x] 优化情绪分析逻辑，移除聊天回复中的情绪分析功能
    - [x] 优化情绪分析提示词，要求直接返回中文情感类型和内容
    - [x] 完善小程序端的情绪分析处理，支持中文情感类型
    - [x] 修复情绪维度和情绪历史对比不显示的问题
    - [x] 修复情绪波动数据异常问题，确保数据在正常范围内
    - [x] 修复情绪数据重复处理问题，避免异常值
    - [x] 完善情绪分析逻辑，优化小程序端的情绪分析处理
    - [x] 移除聊天页面中的情绪分析数据处理逻辑
    - [x] 优化聊天界面键盘弹出问题，确保导航栏和消息内容不被遮挡
- [x] **文档更新**:
    - [x] 更新 README.md 添加最新更新内容
    - [x] 更新 todo.md 添加已完成的任务
    - [x] 新增情绪分析功能使用指南
    - [x] 新增ECharts组件使用指南
    - [x] 新增情绪分析云函数调用指南
    - [x] 新增 roles 云函数使用文档
    - [x] 新增 roles 云函数部署说明
    - [x] 新增预设角色功能使用指南
    - [x] 更新 README.md 添加聊天界面和情绪分析标签相关内容
    - [x] 更新 todo.md 添加聊天气泡和情绪标签优化相关内容
    - [x] 新增聊天记录本地缓存与下拉加载功能说明
    - [x] 更新 README.md 添加聊天记录缓存与加载相关内容
    - [x] 更新 todo.md 添加聊天记录缓存与下拉加载相关内容
    - [x] 更新 README.md 添加智能欢迎语和历史记录加载优化相关内容
    - [x] 更新 todo.md 添加智能欢迎语和历史记录加载优化相关内容
    - [x] 更新 README.md 添加将心情树洞tab页改为role-select页面的相关内容
    - [x] 更新 todo.md 添加将心情树洞tab页改为role-select页面的相关内容
    - [x] 更新 README.md 添加角色编辑功能修复的相关内容
    - [x] 更新 todo.md 添加角色编辑功能修复的相关内容
    - [x] 更新 README.md 添加角色编辑自动跳转优化的相关内容
    - [x] 更新 todo.md 添加角色编辑自动跳转优化的相关内容
    - [x] 更新 README.md 添加角色编辑提示词模板优化的相关内容
    - [x] 更新 todo.md 添加角色编辑提示词模板优化的相关内容
    - [x] 更新 README.md 添加提示词专业编辑器的相关内容
    - [x] 更新 todo.md 添加提示词专业编辑器的相关内容
    - [x] 更新 README.md 添加提示词卡片化设计的相关内容
    - [x] 更新 todo.md 添加提示词卡片化设计的相关内容
    - [x] 更新 README.md 添加角色编辑页面文本区域优化的相关内容
    - [x] 更新 todo.md 添加角色编辑页面文本区域优化的相关内容
    - [x] 更新 README.md 添加提示词编辑页面角色名称乱码问题修复的相关内容
    - [x] 更新 todo.md 添加提示词编辑页面角色名称乱码问题修复的相关内容
    - [x] 更新 README.md 添加提示词编辑页面保存失败问题修复的相关内容
    - [x] 更新 todo.md 添加提示词编辑页面保存失败问题修复的相关内容
    - [x] 更新 README.md 添加角色编辑页面提示词卡片显示undefined问题修复的相关内容
    - [x] 更新 todo.md 添加角色编辑页面提示词卡片显示undefined问题修复的相关内容
    - [x] 更新 README.md 添加彻底修复角色编辑页面提示词卡片显示undefined问题的相关内容
    - [x] 更新 todo.md 添加彻底修复角色编辑页面提示词卡片显示undefined问题的相关内容
    - [x] 更新 README.md 添加优化角色编辑页面按钮位置的相关内容
    - [x] 更新 todo.md 添加优化角色编辑页面按钮位置的相关内容
    - [x] 更新 README.md 添加扩大角色编辑页面生活经历文本区域的相关内容
    - [x] 更新 todo.md 添加扩大角色编辑页面生活经历文本区域的相关内容
    - [x] 更新 README.md 添加角色选择页面暗夜模式的相关内容
    - [x] 更新 todo.md 添加角色选择页面暗夜模式的相关内容
    - [x] 将 README.md 中的更新日期改为版本号格式
    - [x] 更新 README.md 添加聊天消息分段输出功能的相关内容
    - [x] 更新 todo.md 添加聊天消息分段输出功能的相关内容
    - [x] 更新 README.md 添加优化提示词生成和分段输出功能的相关内容
    - [x] 更新 todo.md 添加优化提示词生成和分段输出功能的相关内容
    - [x] 更新 README.md 添加进一步优化对话简洁度的相关内容
    - [x] 更新 todo.md 添加进一步优化对话简洁度的相关内容
    - [x] 更新 README.md 添加优化聊天时间戳显示的相关内容
    - [x] 更新 todo.md 添加优化聊天时间戳显示的相关内容
    - [x] 更新 README.md 添加修复历史对话和时间戳显示问题的相关内容
    - [x] 更新 todo.md 添加修复历史对话和时间戳显示问题的相关内容
    - [x] 更新 README.md 添加优化分段消息逻辑和系统提示词的相关内容
    - [x] 更新 todo.md 添加优化分段消息逻辑和系统提示词的相关内容
    - [x] 更新 README.md 添加修复云函数语法错误的相关内容
    - [x] 更新 todo.md 添加修复云函数语法错误的相关内容
    - [x] 更新 README.md 添加优化情绪分析逻辑的相关内容
    - [x] 更新 todo.md 添加优化情绪分析逻辑的相关内容
    - [x] 更新 README.md 添加优化情绪分析提示词的相关内容
    - [x] 更新 todo.md 添加优化情绪分析提示词的相关内容
    - [x] 更新 README.md 添加完善小程序端情绪分析处理的相关内容
    - [x] 更新 todo.md 添加完善小程序端情绪分析处理的相关内容
    - [x] 更新 README.md 添加修复情绪维度和情绪历史对比不显示问题的相关内容
    - [x] 更新 todo.md 添加修复情绪维度和情绪历史对比不显示问题的相关内容
    - [x] 更新 README.md 添加修复情绪波动数据异常问题的相关内容
    - [x] 更新 todo.md 添加修复情绪波动数据异常问题的相关内容
    - [x] 更新 README.md 添加修复情绪数据重复处理问题的相关内容
    - [x] 更新 todo.md 添加修复情绪数据重复处理问题的相关内容
    - [x] 更新 README.md 添加移除聊天页面中情绪分析数据处理逻辑的相关内容
    - [x] 更新 todo.md 添加移除聊天页面中情绪分析数据处理逻辑的相关内容
    - [x] 更新 README.md 添加完善情绪分析逻辑的相关内容
    - [x] 更新 todo.md 添加完善情绪分析逻辑的相关内容
    - [x] 更新 README.md 添加情绪历史页面的相关内容
    - [x] 更新 todo.md 添加情绪历史页面的相关内容
    - [x] 新增情绪历史页面使用指南文档
    - [x] 更新 README.md 添加情绪波动指数优化的相关内容
    - [x] 更新 todo.md 添加情绪波动指数优化的相关内容
    - [x] 新增情绪波动指数优化的更新历史文档
    - [x] 更新 README.md 添加关键词分类功能的相关内容
    - [x] 更新 todo.md 添加关键词分类功能的相关内容
    - [x] 更新 README.md 添加关键词情感关联功能的相关内容
    - [x] 更新 todo.md 添加关键词情感关联功能的相关内容
    - [x] 新增兴趣标签云组件使用指南文档
    - [x] 新增关键词情感关联功能使用指南文档
    - [x] 更新 README.md 添加新组件的相关内容
    - [x] 更新 todo.md 添加新组件的相关内容
    - [ ] 更新 API 文档
- [ ] **部署上线**: 提交审核，发布小程序
